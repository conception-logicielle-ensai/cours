---
title: üîÑ Automatisation des contr√¥les sur une base de code versionn√©e
url:  /docs/automatisation
---
## ‚ö†Ô∏è C'est en travaux, revenez plus tard !

Notre page est actuellement en cours d'√©criture et nous mettons tout en ≈ìuvre pour vous offrir la meilleure exp√©rience possible. Nous vous prions de bien vouloir patienter, elle sera remplie prochainement.

## Automatisation des contr√¥les statique


### Qu'est-ce qu'un git hooks ? 

Les hooks Git sont des scripts qui s'ex√©cutent automatiquement d√®s qu'un √©v√©nement particulier se produit dans un d√©p√¥t Git. Ils vous permettent de personnaliser le comportement interne de Git et de d√©clencher des actions personnalisables √† des points cl√©s dans le cycle de vie du d√©veloppement.

### Cr√©ation d'un hooks

On veut une fa√ßon d'automatiser le formatage des fichiers qui vont √™tre dans mon prochain commit, pour cela je vais cr√©er un hooks qu comment du commit.

```bash
# Une commande pour installer un package
pip install black isort flake8
```

Black : Suivez les r√®gles PEP 8 par d√©faut.
isort : Organise les importations dans un ordre logique.
Flake8 : V√©rifie la conformit√© PEP 8.

Pour cela on va cr√©er un fichier `pre-commit` personnalis√© directement dans le dossier `.git/hooks` de votre projet. 

---

### √âtapes pour cr√©er un hook `pre-commit`

1. **Cr√©er ou modifier le fichier `pre-commit`**
   Acc√©dez au dossier `.git/hooks` de votre projet et cr√©ez un fichier nomm√© `pre-commit` :

   ```bash
   touch .git/hooks/pre-commit
   ```

2. **Ajouter du contenu au fichier `pre-commit`**
   Ouvrez ce fichier dans un √©diteur de texte :

   ```bash
   nano .git/hooks/pre-commit
   ```

   Ajoutez le script suivant :

   ```bash
    #!/bin/bash

    # Chemin vers Python (modifiez si n√©cessaire)
    PYTHON_BIN=$(which python3)

    # R√©cup√©rer la liste des fichiers actuellement dans l\'index (staging area)
    STAGED_FILES=$(git diff --cached --name-only --diff-filter=d | grep '\.py$')

    if [[ -z "$STAGED_FILES" ]]; then
    echo "Aucun fichier Python √† v√©rifier."
    exit 0
    fi

    echo "Ex√©cution des v√©rifications sur les fichiers ajout√©s au staging..."

    # Formatage avec Black
    echo "Formatage avec Black..."
    $PYTHON_BIN -m black $STAGED_FILES

    # Organisation des imports avec isort
    echo "Organisation des imports avec isort..."
    $PYTHON_BIN -m isort $STAGED_FILES

    # V√©rification avec Flake8
    echo "V√©rification du style avec Flake8..."
    $PYTHON_BIN -m flake8 $STAGED_FILES
    FLAKE8_STATUS=$?

    if [[ $FLAKE8_STATUS -ne 0 ]]; then
        echo "Erreur : Flake8 a d√©tect√© des probl√®mes. Commit bloqu√©."
        exit 1
    fi

    # R√©ajouter uniquement les fichiers qui √©taient dans le staging
    echo "Ajout des fichiers modifi√©s au staging..."
    git add $STAGED_FILES

    echo "Toutes les v√©rifications sont pass√©es. Commit autoris√©."
    exit 0
   ```

3. **Rendre le fichier ex√©cutable**
   Rendez le fichier `pre-commit` ex√©cutable avec la commande suivante :

   ```bash
   chmod +x .git/hooks/pre-commit
   ```

4. **Tester le hook**
   Essayez de committer un fichier dans votre projet pour voir si le hook est ex√©cut√© :

   ```bash
   git add .
   git commit -m "Test du hook pre-commit"
   ```

   Si des fichiers sont modifi√©s par Black ou isort, le hook les ajoutera automatiquement au staging et r√©ex√©cutera les √©tapes.

---

### Points importants

- Si un fichier ne respecte pas les r√®gles, Flake8 bloquera le commit. Vous devrez corriger les erreurs avant de r√©essayer.
- Si vous avez besoin d'une configuration sp√©cifique pour Black, isort, ou Flake8, placez les fichiers de configuration (`pyproject.toml`, `.isort.cfg`, `.flake8`) √† la racine de votre projet.
